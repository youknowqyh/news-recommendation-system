{"version":3,"sources":["Auth/Auth.js","NewsCard/NewsCard.js","NewsPanel/NewsPanel.js","Base/Base.js","Login/LoginForm.js","Login/LoginPage.js","SignUp/SignUpForm.js","SignUp/SignUpPage.js","App/App.js","index.js"],"names":["Auth","token","email","localStorage","setItem","getItem","removeItem","NewsCard","url","this","sendClickLog","window","open","getEmail","props","news","digest","request","Request","encodeURI","method","headers","getToken","cache","fetch","className","onClick","redirectToUrl","src","urlToImage","alt","title","description","source","id","name","reason","time","React","Component","NewsPanel","state","pageNum","totalPages","loadedAll","handleScroll","bind","isUserAuthenticated","loadMoreNews","_","debounce","addEventListener","scrollY","pageYOffset","document","documentElement","scrollTop","innerHeight","body","offsetHeight","console","log","e","then","res","json","length","setState","concat","news_list","map","href","renderNews","history","replace","withRouter","children","to","deauthenticateUser","push","LoginForm","onSubmit","onChange","errors","user","action","summary","type","htmlFor","password","value","LoginPage","context","processForm","changeUser","event","preventDefault","JSON","stringify","response","status","error","authenticateUser","message","field","target","SignUpForm","SignUpPage","confirm_password","App","path","component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f8227921.chunk.js","sourcesContent":["class Auth {\r\n    /**\r\n    * Authenticate a user. Save a token string in Local Storage\r\n    *\r\n    * @param {string} token\r\n    * @param {string} email\r\n    */\r\n    static authenticateUser(token, email) {\r\n        localStorage.setItem('token', token);\r\n        localStorage.setItem('email', email);\r\n    }\r\n    /**\r\n    * Check if a user is authenticated - check if a token is saved in Local S\r\n    torage\r\n    *\r\n    * @returns {boolean}\r\n    */\r\n    static isUserAuthenticated() {\r\n        return localStorage.getItem('token') !== null;\r\n    }\r\n    /**\r\n    * Deauthenticate a user. Remove token and email from Local Storage.\r\n    *\r\n    */\r\n    static deauthenticateUser() {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('email');\r\n    }\r\n    /**\r\n    * Get a token value.\r\n    *\r\n    * @returns {string}\r\n    */\r\n    static getToken() {\r\n        return localStorage.getItem('token');\r\n    }\r\n    /**\r\n    * Get email.\r\n    *\r\n    * @returns {string}\r\n    */\r\n    static getEmail() {\r\n        return localStorage.getItem('email');\r\n    }\r\n}\r\nexport default Auth;","import './NewsCard.css';\r\nimport React from 'react';\r\nimport Auth from '../Auth/Auth';\r\n\r\nclass NewsCard extends React.Component {\r\n    redirectToUrl(url) {\r\n        this.sendClickLog();\r\n        window.open(url, '_blank');\r\n    }\r\n    sendClickLog() {\r\n        let url = 'http://localhost:3000/news/userId/' + Auth.getEmail()\r\n            + '/newsId/' + this.props.news.digest;\r\n        let request = new Request(encodeURI(url), {\r\n            method: 'POST',\r\n            headers: {\r\n                'Authorization': 'bearer ' + Auth.getToken(),\r\n            },\r\n            cache: \"no-cache\"\r\n        });\r\n\r\n        fetch(request);\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"news-container\" onClick={() => this.redirectToUrl(this.props.news.url)}>\r\n                <div className='row'>\r\n                    <div className='col s4 fill'>\r\n                        <img src={this.props.news.urlToImage} alt='news' />\r\n                    </div>\r\n                    <div className='col s8'>\r\n                        <div className='news-intro-col'>\r\n                            <div className='news-intro-panel'>\r\n                                <h4>{this.props.news.title}</h4>\r\n                                <div className='news-description'>\r\n                                    <p>{this.props.news.description}</p>\r\n                                    <div>\r\n                                        {this.props.news.source.id != null && <div className='chip light-blue news-chip'>{this.props.news.source.name}</div>}\r\n                                        {this.props.news.reason != null && <div className='chip light-green news-chip'>{this.props.news.reason}</div>}\r\n                                        {this.props.news.time != null && <div className='chip amber news-chip'>{this.props.news.time}</div>}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default NewsCard;","import './NewsPanel.css';\r\nimport _ from 'lodash';\r\nimport React from 'react';\r\nimport Auth from '../Auth/Auth';\r\n\r\nimport NewsCard from '../NewsCard/NewsCard';\r\nimport { Link, withRouter } from 'react-router-dom';\r\n\r\nclass NewsPanel extends React.Component {\r\n    constructor() {\r\n        super();\r\n        this.state = { news: null, pageNum: 1, totalPages: 1, loadedAll: false };\r\n        this.handleScroll = this.handleScroll.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (Auth.isUserAuthenticated()) {\r\n            this.loadMoreNews();\r\n        }\r\n        // 防抖\r\n        this.loadMoreNews = _.debounce(this.loadMoreNews, 1000);\r\n        window.addEventListener('scroll', this.handleScroll);\r\n    }\r\n    handleScroll() {\r\n        let scrollY = window.scrollY || window.pageYOffset || document.documentElement.scrollTop;\r\n        if ((window.innerHeight + scrollY) >= (document.body.offsetHeight - 50)) {\r\n            // 滚动到了最底部。\r\n            console.log('Loading more news');\r\n            this.loadMoreNews();\r\n        }\r\n    }\r\n    loadMoreNews(e) {\r\n        if (this.state.loadedAll === true) {\r\n            return;\r\n        }\r\n        let url = 'http://localhost:3000/news/userId/' + Auth.getEmail() + '/pageNum/' + this.state.pageNum\r\n        let request = new Request(encodeURI(url), {\r\n            method: 'GET',\r\n            headers: {\r\n                'Authorization': 'bearer ' + Auth.getToken(),\r\n            },\r\n            cache: 'no-cache',\r\n        });\r\n\r\n        fetch(request)\r\n            .then((res) => res.json())\r\n            .then((news) => {\r\n                if (!news || news.length === 0) {\r\n                    this.setState({ loadedAll: true });\r\n                }\r\n                this.setState({\r\n                    news: this.state.news ? this.state.news.concat(news) : news,\r\n                    pageNum: this.state.pageNum + 1\r\n                });\r\n            });\r\n    }\r\n\r\n    renderNews() {\r\n        var news_list = this.state.news.map(function (news) {\r\n            return (\r\n                <a className='list-group-item' key={news.digest} href=\"#\">\r\n                    <NewsCard news={news} />\r\n                </a>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div className=\"container-fluid\">\r\n                <div className='list-group'>\r\n                    {news_list}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        if (Auth.isUserAuthenticated()) {\r\n            if (this.state.news) {\r\n                return (\r\n                    <div>\r\n                        {this.renderNews()}\r\n                    </div>\r\n                );\r\n            } else {\r\n                return (\r\n                    <div>\r\n                        <div id='msg-app-loading'>\r\n                            Loading\r\n                        </div>\r\n                    </div>\r\n                )\r\n            }\r\n        } else {\r\n            this.props.history.replace(\"/login\")\r\n\r\n            return (\r\n                <div className='container'>\r\n                    Please login first\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n}\r\n// export default NewsPanel;\r\nexport default withRouter(NewsPanel);\r\n","import React from 'react';\r\nimport Auth from '../Auth/Auth';\r\nimport PropTypes from 'prop-types';\r\n\r\n// import './Base.css';\r\nimport { Link, withRouter } from 'react-router-dom';\r\n\r\nconst Base = function ({ children, history }) {\r\n    return (\r\n        <div>\r\n            <nav className=\"nav-bar  light-blue darken-4\">\r\n                <div className=\"nav-wrapper\">\r\n                    {/* <a href=\"/\" className=\"brand-logo\">&nbsp;&nbsp;News Feed</a> */}\r\n                    <Link to=\"/\" className=\"brand-logo\">&nbsp;&nbsp;News Feed</Link>\r\n\r\n                    <ul id=\"nav-mobile\" className=\"right\">\r\n                        {Auth.isUserAuthenticated() ?\r\n                            (<div>\r\n                                <li>{Auth.getEmail()}</li>\r\n                                <li>\r\n\r\n                                    <a href='/' onClick={() => {\r\n                                        Auth.deauthenticateUser(() => this.props.history.push(\"/logout\"));\r\n                                    }}>Log out</a>\r\n                                </li>\r\n\r\n                            </div>)\r\n                            :\r\n                            (<div>\r\n                                {/* <li><a href=\"/login\">Log in</a></li>\r\n                                <li><a href=\"/signup\">Sign up</a></li> */}\r\n                                <li><Link to=\"/login\">Log in</Link></li>\r\n                                <li><Link to=\"/signup\">Sign up</Link></li>\r\n                            </div>)\r\n                        }\r\n                    </ul>\r\n                </div>\r\n            </nav>\r\n            <br />\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n// 规定必须传入参数\r\nBase.propTypes = {\r\n    children: PropTypes.object.isRequired\r\n};\r\n// export default Base;\r\nexport default withRouter(Base);\r\n","import React from 'react';\r\nimport './LoginForm.css';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst LoginForm = ({\r\n    onSubmit,\r\n    onChange,\r\n    errors,\r\n    user,\r\n}) => (\r\n    <div className=\"container\">\r\n        <div className=\"card-panel login-panel\">\r\n            <form className=\"col s12\" action=\"/\" onSubmit={onSubmit}>\r\n                <h4 className=\"center-align\">Login</h4>\r\n                {errors.summary && <div className=\"row\"><p className=\"error-message\">{errors.summary}</p></div>}\r\n                \r\n                <div className=\"row\">\r\n                    <div className=\"input-field col s12\">\r\n                        <input className=\"validate\" id=\"email\" type=\"email\" name=\"email\"\r\n                            onChange={onChange} />\r\n                        <label htmlFor='email'>Email</label>\r\n                    </div>\r\n                </div>\r\n                {errors.email && <div className=\"row\"><p className=\"error-message\">\r\n                    {errors.email}</p></div>}\r\n                <div className=\"row\">\r\n                    <div className=\"input-field col s12\">\r\n                        <input className=\"validate\" id=\"password\" type=\"password\"\r\n                            name=\"password\" onChange={onChange} />\r\n                        <label htmlFor='password'>Password</label>\r\n                    </div>\r\n                </div>\r\n                {errors.password && <div className=\"row\"><p className=\"error-message\">{errors.password}</p></div>}\r\n                <div className=\"row right-align\">\r\n                    <button type=\"submit\" className=\"waves-effect waves-light btn light-blue darken-4\" value='Log in'>Log in</button>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <p className=\"right-align\"> New to here? <Link to=\"/signup\">Sign up</Link></p>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nLoginForm.propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    errors: PropTypes.object.isRequired,\r\n    user: PropTypes.object.isRequired\r\n};\r\nexport default LoginForm;","import React, { Component } from 'react';\r\nimport Auth from '../Auth/Auth';\r\nimport LoginForm from './LoginForm';\r\nimport PropTypes from 'prop-types'\r\nclass LoginPage extends Component {\r\n\r\n    constructor(props, context) {\r\n        super(props, context);\r\n        this.state = {\r\n            errors: {},\r\n            user: {\r\n                email: '',\r\n                password: ''\r\n            }\r\n        };\r\n        this.processForm = this.processForm.bind(this);\r\n        this.changeUser = this.changeUser.bind(this);\r\n    }\r\n\r\n    processForm(event) {\r\n        event.preventDefault()\r\n\r\n        const email = this.state.user.email;\r\n        const password = this.state.user.password;\r\n        console.log('email:', email);\r\n        console.log('password:', password);\r\n\r\n        //post login data\r\n        fetch('http://localhost:3000/auth/login', {\r\n            method: 'POST',\r\n            cache: \"no-cache\",\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                email: this.state.user.email,\r\n                password: this.state.user.password\r\n            })\r\n        }).then(response => {\r\n            if (response.status === 200) {\r\n                this.setState({\r\n                    error: {}\r\n                });\r\n\r\n                response.json().then((json) => {\r\n                    console.log(json);\r\n                    Auth.authenticateUser(json.token, email);\r\n                    this.props.history.replace('/');\r\n                    // this.props.parentThis.props.history.push('/');\r\n                });\r\n            } else {\r\n                console.log('login failed');\r\n                response.json().then((json) => {\r\n                    const errors = json.errors ? json.errors : {};\r\n                    errors.summary = json.message;\r\n                    this.setState({ errors });\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    changeUser(event) {\r\n        const field = event.target.name;\r\n        const user = this.state.user;\r\n        user[field] = event.target.value;\r\n\r\n        this.setState({ user });\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <LoginForm\r\n                onSubmit={this.processForm}\r\n                onChange={this.changeUser}\r\n                errors={this.state.errors}\r\n                user={this.state.user}\r\n            />\r\n        );\r\n    }\r\n}\r\n// LoginPage.contextTypes = {\r\n//     router: PropTypes.object.isRequired\r\n// };\r\nexport default LoginPage;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './SignUpForm.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst SignUpForm = ({\r\n    onSubmit,\r\n    onChange,\r\n    errors,\r\n    user\r\n}) => (\r\n    <div className=\"container\">\r\n        <div className=\"card-panel signup-panel\">\r\n            <form className=\"col s12\" action=\"/\" onSubmit={onSubmit}>\r\n                <h4 className=\"center-align\">Sign Up</h4>\r\n                {errors.summary && <div className=\"row\"><p className=\"error-message\">{errors.summary}</p></div>}\r\n                <div className=\"row\">\r\n                    <div className=\"input-field col s12\">\r\n                        <input id=\"email\" type=\"email\" name=\"email\" className=\"validate\" onChange={onChange}/>\r\n                        <label htmlFor=\"email\">Email</label>\r\n                    </div>\r\n                </div>\r\n                {errors.email && <div className=\"row\"><p className=\"error-message\">{errors.email}</p></div>}\r\n                <div className=\"row\">\r\n                    <div className=\"input-field col s12\">\r\n                        <input id=\"password\" type=\"password\" name=\"password\" className=\"validate\" onChange={onChange}/>\r\n                        <label htmlFor=\"password\">Password</label>\r\n                    </div>\r\n                </div>\r\n                {errors.password && <div className=\"row\"><p className=\"error-message\">{errors.password}</p></div>}\r\n                <div className=\"row\">\r\n                    <div className=\"input-field col s12\">\r\n                        <input id=\"confirm_password\" type=\"password\" name=\"confirm_password\" className=\"validate\" onChange={onChange}/>\r\n                        <label htmlFor=\"confirm_password\">Confirm Password</label>\r\n                    </div>\r\n                </div>\r\n                <div className=\"row right-align\">\r\n                    <button type=\"submit\" className=\"waves-effect waves-light btn light-blue darken-4\" value='Sign Up'>Sign Up</button>\r\n                </div>\r\n                <div className=\"row\">\r\n                    <p className=\"right-align\"> Already have an account? <Link to=\"/login\">Log in</Link></p>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    </div>\r\n);\r\n\r\nSignUpForm.propTypes = {\r\n    onSubmit: PropTypes.func.isRequired,\r\n    onChange: PropTypes.func.isRequired,\r\n    errors: PropTypes.object.isRequired,\r\n    user: PropTypes.object.isRequired\r\n}\r\n\r\nexport default SignUpForm;","import React, { Component } from 'react';\r\nimport SignUpForm from './SignUpForm';\r\n\r\nclass SignUpPage extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            errors: {},\r\n            user: {\r\n                email: '',\r\n                password: '',\r\n                confirm_password: ''\r\n            }\r\n        }\r\n\r\n        this.processForm = this.processForm.bind(this);\r\n        this.changeUser = this.changeUser.bind(this);\r\n    }\r\n\r\n    processForm(event) {\r\n        event.preventDefault();\r\n\r\n        const email = this.state.user.email;\r\n        const password = this.state.user.password;\r\n        const confirm_password = this.state.user.confirm_password;\r\n\r\n        console.log('email: ', email);\r\n        console.log('password: ', password);\r\n        console.log('confirm_password: ', confirm_password);\r\n\r\n        if (password !== confirm_password) {\r\n            return;\r\n        }\r\n\r\n        fetch('http://localhost:3000/auth/signup', {\r\n            method: 'POST',\r\n            cache: 'no-cache',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                email: this.state.user.email,\r\n                password: this.state.user.password\r\n            })\r\n        }).then(response => {\r\n            if (response.status === 200) {\r\n                this.setState({\r\n                    errors: {}\r\n                })\r\n                // Change current url to login\r\n                this.props.history.push('/login');\r\n            } else {\r\n                response.json().then(function(json){\r\n                    console.log(json);\r\n                    const errors = json.errors? json.errors: {};\r\n                    errors.summary = json.message;\r\n                    console.log(this.state.errors);\r\n                    this.setState({\r\n                        errors\r\n                    })\r\n                }.bind(this));\r\n            }\r\n        })\r\n    }\r\n\r\n    changeUser(event) {\r\n        const field = event.target.name;\r\n        const user = this.state.user;\r\n        user[field] = event.target.value;\r\n\r\n        this.setState({user});\r\n        console.log(this.state.user.password);\r\n        if (this.state.user.password !== this.state.user.confirm_password) {\r\n            const errors = this.state.errors;\r\n            errors.password = \"Password and Confirm Password don't match.\";\r\n            this.setState({ errors });\r\n        } else {\r\n            const errors = this.state.errors;\r\n            errors.password = '';\r\n            this.setState({ errors });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <SignUpForm \r\n                onSubmit={this.processForm}\r\n                onChange={this.changeUser}\r\n                errors={this.state.errors}\r\n                user={this.state.user}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nexport default SignUpPage;","import 'materialize-css/dist/css/materialize.min.css';\nimport 'materialize-css/dist/js/materialize.min.js';\n// import NewsPanel from '../NewsPanel/NewsPanel';\n\n// // import logo from './logo.svg';\n// import './App.css';\n\n// function App() {\n//   return (\n//     <div className=\"App\">\n//         <div className=\"container\">\n//           <NewsPanel/>\n//         </div>\n//     </div>\n//   );\n// }\n\n// export default App;\n\n\nimport React from \"react\";\nimport { Switch, Route } from \"react-router-dom\";\nimport './App.css';\nimport NewsPanel from \"../NewsPanel/NewsPanel\";\nimport Base from \"../Base/Base\";\nimport LoginPage from \"../Login/LoginPage\";\nimport SignUpPage from \"../SignUp/SignUpPage\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      <div>\n        <Base>\n          <Switch>\n            <Route path=\"/login\" component={LoginPage} />\n            <Route path=\"/signup\" component={SignUpPage} />\n            <Route path=\"/\" component={NewsPanel} />\n          </Switch>\n        </Base>\n\n      </div>\n    )\n  }\n}\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App/App';\nimport {BrowserRouter as Router} from 'react-router-dom'\n\nReactDOM.render(\n    <Router>\n        <App />\n    </Router>, \n    document.getElementById('root')\n);\n"],"sourceRoot":""}